//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool from CryptoGateway Software Inc.
//     Tool name: CGW X-Script RDB visual Layer Generator
//
//     Archymeta Information Technologies Co., Ltd.
//
//     Changes to this file, could be overwritten if the code is re-generated.
//     Add (if not yet) a code-manager node to the generator to specify 
//     how existing files are processed.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Configuration;
using System.Collections.Generic;
using System.Reflection;
using System.Linq;
using System.Linq.Expressions;
using System.Threading;
using System.Runtime.Serialization;
using System.ComponentModel.DataAnnotations;

namespace CryptoGateway.RDB.Data.MembershipPlus
{
    /// <summary>
    /// A entity in "UserDetails" data set.
    /// </summary>
    /// <remarks>
    ///  <para>
    ///    Properties of the entity are categorized in the following:
    ///  </para>
    ///  <list type="table">
    ///    <listheader>
    ///       <term>Primary keys</term><description>Description</description>
    ///    </listheader>
    ///    <item>
    ///      <term>ID</term>
    ///      <description>See <see cref="UserDetail.ID" />. Primary key; fixed; not null.</description>
    ///    </item>
    ///  </list>
    ///  <list type="table">
    ///    <listheader>
    ///       <term>Intrinsic Identifiers</term><description>Description</description>
    ///    </listheader>
    ///    <item>
    ///      <term>ApplicationID</term>
    ///      <description>See <see cref="UserDetail.ApplicationID" />. Intrinsic id; fixed; not null; foreign key.</description>
    ///    </item>
    ///    <item>
    ///      <term>UserID</term>
    ///      <description>See <see cref="UserDetail.UserID" />. Intrinsic id; fixed; not null; foreign key.</description>
    ///    </item>
    ///  </list>
    ///  <list type="table">
    ///    <listheader>
    ///       <term>None editable properties</term><description>Description</description>
    ///    </listheader>
    ///    <item>
    ///      <term>CreateDate</term>
    ///      <description>See <see cref="UserDetail.CreateDate" />. Fixed; not null.</description>
    ///    </item>
    ///  </list>
    ///  <list type="table">
    ///    <listheader>
    ///       <term>Editable properties</term><description>Description</description>
    ///    </listheader>
    ///    <item>
    ///      <term>BirthDate</term>
    ///      <description>See <see cref="UserDetail.BirthDate" />. Editable; nullable.</description>
    ///    </item>
    ///    <item>
    ///      <term>Description</term>
    ///      <description>See <see cref="UserDetail.Description" />. Editable; nullable; load delayed.</description>
    ///    </item>
    ///    <item>
    ///      <term>Gender</term>
    ///      <description>See <see cref="UserDetail.Gender" />. Editable; nullable; max-length = 10 characters.</description>
    ///    </item>
    ///    <item>
    ///      <term>LastModified</term>
    ///      <description>See <see cref="UserDetail.LastModified" />. Editable; nullable.</description>
    ///    </item>
    ///    <item>
    ///      <term>Photo</term>
    ///      <description>See <see cref="UserDetail.Photo" />. Editable; nullable; load delayed.</description>
    ///    </item>
    ///    <item>
    ///      <term>PhotoLastModified</term>
    ///      <description>See <see cref="UserDetail.PhotoLastModified" />. Editable; nullable.</description>
    ///    </item>
    ///    <item>
    ///      <term>PhotoMime</term>
    ///      <description>See <see cref="UserDetail.PhotoMime" />. Editable; nullable; max-length = 50 characters.</description>
    ///    </item>
    ///    <item>
    ///      <term>WebsiteUrl</term>
    ///      <description>See <see cref="UserDetail.WebsiteUrl" />. Editable; nullable; max-length = 150 characters.</description>
    ///    </item>
    ///  </list>
    ///  <list type="table">
    ///    <listheader>
    ///       <term>Foreign keys</term><description>Description</description>
    ///    </listheader>
    ///    <item>
    ///      <term>ApplicationID</term>
    ///      <description>See <see cref="UserDetail.ApplicationID" />. Intrinsic id; fixed; not null; foreign key.</description>
    ///    </item>
    ///    <item>
    ///      <term>UserID</term>
    ///      <description>See <see cref="UserDetail.UserID" />. Intrinsic id; fixed; not null; foreign key.</description>
    ///    </item>
    ///  </list>
    ///  <list type="table">
    ///    <listheader>
    ///       <term>This entity depends on</term><description>Description</description>
    ///    </listheader>
    ///    <item>
    ///      <term>Application_Ref</term>
    ///      <description>See <see cref="UserDetail.Application_Ref" />, which is a member of the data set "Applications" for <see cref="Application_" />.</description>
    ///    </item>
    ///    <item>
    ///      <term>UserRef</term>
    ///      <description>See <see cref="UserDetail.UserRef" />, which is a member of the data set "Users" for <see cref="User" />.</description>
    ///    </item>
    ///  </list>
    /// </remarks>
    [DataContract]
    public class UserDetail : IDbEntity 
    {
        /// <summary>
        /// For internal use only.
        /// </summary>
        public bool IsOperationHandled = false;

        /// <summary>
        /// Used on the server side to return an unique key for caching purposes.
        /// </summary>
        public string CacheKey
        {
            get
            {
                return this.ID;
            }
        }

        /// <summary>
        /// Whether or not the entity was already persisted into to the data source. 
        /// </summary>
        [DataMember]
        public bool IsPersisted
        {
            get { return _isPersisted; }
            set { _isPersisted = value; }
        }
        private bool _isPersisted = false;

        /// <summary>
        /// Used internally.
        /// </summary>
        public bool StartAutoUpdating
        {
            get { return _startAutoUpdating; }
            set { _startAutoUpdating = value; }
        }
        private bool _startAutoUpdating = false;

        /// <summary>
        /// Used to matching entities in input adding or updating entity list and the returned ones, see <see cref="IUserDetailService.AddOrUpdateEntities" />.
        /// </summary>
        [DataMember]
        public int UpdateIndex
        {
            get { return _updateIndex; }
            set { _updateIndex = value; }
        }
        private int _updateIndex = -1;

        /// <summary>
        /// Its value provides a list of value for intrinsic keys and modified properties.
        /// </summary>
        public string SignatureString 
        { 
            get
            {
                string str = "";
                str += "ApplicationID = " + ApplicationID + "\r\n";
                str += "UserID = " + UserID + "\r\n";
                if (IsBirthDateModified)
                    str += "Modified [BirthDate] = " + BirthDate + "\r\n";
                if (IsDescriptionModified)
                    str += "Modified [Description] = " + Description + "\r\n";
                if (IsGenderModified)
                    str += "Modified [Gender] = " + Gender + "\r\n";
                if (IsLastModifiedModified)
                    str += "Modified [LastModified] = " + LastModified + "\r\n";
                if (IsPhotoModified)
                    str += "Modified [Photo] = " + Photo + "\r\n";
                if (IsPhotoLastModifiedModified)
                    str += "Modified [PhotoLastModified] = " + PhotoLastModified + "\r\n";
                if (IsPhotoMimeModified)
                    str += "Modified [PhotoMime] = " + PhotoMime + "\r\n";
                if (IsWebsiteUrlModified)
                    str += "Modified [WebsiteUrl] = " + WebsiteUrl + "\r\n";;
                return str.Trim();
            }
        }

        /// <summary>
        /// Configured at system generation step, its value provides a short, but characteristic summary of the entity.
        /// </summary>
        [DataMember]
        public string DistinctString
        {
            get 
            {
                if (_distinctString == null)
                    _distinctString = GetDistinctString(true);
                return _distinctString;
            }
            set
            {
                _distinctString = value;
            }
        }
        private string _distinctString = null;

        private string GetDistinctString(bool ShowPathInfo)
        {
            LoadUserRef();
            return String.Format(@"Deails for {0}", (UserRef != null ? UserRef.DistinctString : ""));
        }

        /// <summary>
        /// Whether or not the entity was edited.
        /// </summary>
        [DataMember]
        public bool IsEntityChanged
        {
            get { return _isEntityChanged; }
            set { _isEntityChanged = value; }
        }
        private bool _isEntityChanged = true;

        /// <summary>
        /// Whether or not the entity was to be deleted.
        /// </summary>
        [DataMember]
        public bool IsDeleted
        {
            get { return _isDeleted; }
            set { _isDeleted = value; }
        }
        private bool _isDeleted = false;

#region Properties of the current entity

        /// <summary>
        /// Meta-info: primary key; fixed; not null.
        /// </summary>
        [Key]
        [Editable(false)]
        [DataMember(IsRequired = true)]
        public string ID
        { 
            get
            {
                return _ID;
            }
            set
            {
                if (_ID != value)
                {
                    _ID = value;
                }
            }
        }
        private string _ID = default(string);

        /// <summary>
        /// Meta-info: fixed; not null.
        /// </summary>
        [Required]
        [Editable(false)]
        [DataMember(IsRequired = true)]
        public DateTime CreateDate
        { 
            get
            {
                return _CreateDate;
            }
            set
            {
                if (_CreateDate != value)
                {
                    _CreateDate = value;
                }
            }
        }
        private DateTime _CreateDate = default(DateTime);

        /// <summary>
        /// Meta-info: editable; nullable.
        /// </summary>
        [Editable(true)]
        [DataMember(IsRequired = false)]
        public System.Nullable<DateTime> BirthDate
        { 
            get
            {
                return _BirthDate;
            }
            set
            {
                if (_BirthDate != value)
                {
                    _BirthDate = value;
                    if (StartAutoUpdating)
                        IsBirthDateModified = true;
                }
            }
        }
        private System.Nullable<DateTime> _BirthDate = default(System.Nullable<DateTime>);

        /// <summary>
        /// Wether or not the value of <see cref="BirthDate" /> was changed compared to what it was loaded last time. 
        /// Note: the backend data source updates the changed <see cref="BirthDate" /> only if this is set to true no matter what
        /// the actual value of <see cref="BirthDate" /> is.
        /// </summary>
        [DataMember]
        public bool IsBirthDateModified
        { 
            get
            {
                return _isBirthDateModified;
            }
            set
            {
                _isBirthDateModified = value;
            }
        }
        private bool _isBirthDateModified = false;

        /// <summary>
        /// Meta-info: editable; nullable; load delayed.
        /// </summary>
        [Editable(true)]
        [DataMember(IsRequired = false)]
        public string Description
        { 
            get
            {
                return _Description;
            }
            set
            {
                if (_Description != value)
                {
                    _Description = value;
                    if (StartAutoUpdating)
                        IsDescriptionModified = true;
                }
            }
        }
        private string _Description = default(string);

        /// <summary>
        /// Wether or not the value of <see cref="Description" /> was changed compared to what it was loaded last time. 
        /// Note: the backend data source updates the changed <see cref="Description" /> only if this is set to true no matter what
        /// the actual value of <see cref="Description" /> is.
        /// </summary>
        [DataMember]
        public bool IsDescriptionModified
        { 
            get
            {
                return _isDescriptionModified;
            }
            set
            {
                _isDescriptionModified = value;
            }
        }
        private bool _isDescriptionModified = false;

        /// <summary>
        /// Wether or not the value of the delay loaded "Description" is Loaded. Clients are responsible for keeping 
        /// track of loading status of delay loading properties.
        /// </summary>
        [DataMember]
        public bool IsDescriptionLoaded
        { 
            get
            {
                return _isDescriptionLoaded;
            }
            set
            {
                _isDescriptionLoaded = value;
            }
        }
        private bool _isDescriptionLoaded = false;

        /// <summary>
        /// Meta-info: editable; nullable; max-length = 10 characters.
        /// </summary>
        [Editable(true)]
        [StringLength(10)]
        [DataMember(IsRequired = false)]
        public string Gender
        { 
            get
            {
                return _Gender;
            }
            set
            {
                if (_Gender != value)
                {
                    _Gender = value;
                    if (StartAutoUpdating)
                        IsGenderModified = true;
                }
            }
        }
        private string _Gender = default(string);

        /// <summary>
        /// Wether or not the value of <see cref="Gender" /> was changed compared to what it was loaded last time. 
        /// Note: the backend data source updates the changed <see cref="Gender" /> only if this is set to true no matter what
        /// the actual value of <see cref="Gender" /> is.
        /// </summary>
        [DataMember]
        public bool IsGenderModified
        { 
            get
            {
                return _isGenderModified;
            }
            set
            {
                _isGenderModified = value;
            }
        }
        private bool _isGenderModified = false;

        /// <summary>
        /// Meta-info: editable; nullable.
        /// </summary>
        [Editable(true)]
        [DataMember(IsRequired = false)]
        public System.Nullable<DateTime> LastModified
        { 
            get
            {
                return _LastModified;
            }
            set
            {
                if (_LastModified != value)
                {
                    _LastModified = value;
                    if (StartAutoUpdating)
                        IsLastModifiedModified = true;
                }
            }
        }
        private System.Nullable<DateTime> _LastModified = default(System.Nullable<DateTime>);

        /// <summary>
        /// Wether or not the value of <see cref="LastModified" /> was changed compared to what it was loaded last time. 
        /// Note: the backend data source updates the changed <see cref="LastModified" /> only if this is set to true no matter what
        /// the actual value of <see cref="LastModified" /> is.
        /// </summary>
        [DataMember]
        public bool IsLastModifiedModified
        { 
            get
            {
                return _isLastModifiedModified;
            }
            set
            {
                _isLastModifiedModified = value;
            }
        }
        private bool _isLastModifiedModified = false;

        /// <summary>
        /// Meta-info: editable; nullable; load delayed.
        /// </summary>
        [Editable(true)]
        [DataMember(IsRequired = false)]
        public byte[] Photo
        { 
            get
            {
                return _Photo;
            }
            set
            {
                if (_Photo != value)
                {
                    _Photo = value;
                    if (StartAutoUpdating)
                        IsPhotoModified = true;
                }
            }
        }
        private byte[] _Photo = default(byte[]);

        /// <summary>
        /// Wether or not the value of <see cref="Photo" /> was changed compared to what it was loaded last time. 
        /// Note: the backend data source updates the changed <see cref="Photo" /> only if this is set to true no matter what
        /// the actual value of <see cref="Photo" /> is.
        /// </summary>
        [DataMember]
        public bool IsPhotoModified
        { 
            get
            {
                return _isPhotoModified;
            }
            set
            {
                _isPhotoModified = value;
            }
        }
        private bool _isPhotoModified = false;

        /// <summary>
        /// Wether or not the value of the delay loaded "Photo" is Loaded. Clients are responsible for keeping 
        /// track of loading status of delay loading properties.
        /// </summary>
        [DataMember]
        public bool IsPhotoLoaded
        { 
            get
            {
                return _isPhotoLoaded;
            }
            set
            {
                _isPhotoLoaded = value;
            }
        }
        private bool _isPhotoLoaded = false;

        /// <summary>
        /// Meta-info: editable; nullable.
        /// </summary>
        [Editable(true)]
        [DataMember(IsRequired = false)]
        public System.Nullable<DateTime> PhotoLastModified
        { 
            get
            {
                return _PhotoLastModified;
            }
            set
            {
                if (_PhotoLastModified != value)
                {
                    _PhotoLastModified = value;
                    if (StartAutoUpdating)
                        IsPhotoLastModifiedModified = true;
                }
            }
        }
        private System.Nullable<DateTime> _PhotoLastModified = default(System.Nullable<DateTime>);

        /// <summary>
        /// Wether or not the value of <see cref="PhotoLastModified" /> was changed compared to what it was loaded last time. 
        /// Note: the backend data source updates the changed <see cref="PhotoLastModified" /> only if this is set to true no matter what
        /// the actual value of <see cref="PhotoLastModified" /> is.
        /// </summary>
        [DataMember]
        public bool IsPhotoLastModifiedModified
        { 
            get
            {
                return _isPhotoLastModifiedModified;
            }
            set
            {
                _isPhotoLastModifiedModified = value;
            }
        }
        private bool _isPhotoLastModifiedModified = false;

        /// <summary>
        /// Meta-info: editable; nullable; max-length = 50 characters.
        /// </summary>
        [Editable(true)]
        [StringLength(50)]
        [DataMember(IsRequired = false)]
        public string PhotoMime
        { 
            get
            {
                return _PhotoMime;
            }
            set
            {
                if (_PhotoMime != value)
                {
                    _PhotoMime = value;
                    if (StartAutoUpdating)
                        IsPhotoMimeModified = true;
                }
            }
        }
        private string _PhotoMime = default(string);

        /// <summary>
        /// Wether or not the value of <see cref="PhotoMime" /> was changed compared to what it was loaded last time. 
        /// Note: the backend data source updates the changed <see cref="PhotoMime" /> only if this is set to true no matter what
        /// the actual value of <see cref="PhotoMime" /> is.
        /// </summary>
        [DataMember]
        public bool IsPhotoMimeModified
        { 
            get
            {
                return _isPhotoMimeModified;
            }
            set
            {
                _isPhotoMimeModified = value;
            }
        }
        private bool _isPhotoMimeModified = false;

        /// <summary>
        /// Meta-info: editable; nullable; max-length = 150 characters.
        /// </summary>
        [Editable(true)]
        [StringLength(150)]
        [DataMember(IsRequired = false)]
        public string WebsiteUrl
        { 
            get
            {
                return _WebsiteUrl;
            }
            set
            {
                if (_WebsiteUrl != value)
                {
                    _WebsiteUrl = value;
                    if (StartAutoUpdating)
                        IsWebsiteUrlModified = true;
                }
            }
        }
        private string _WebsiteUrl = default(string);

        /// <summary>
        /// Wether or not the value of <see cref="WebsiteUrl" /> was changed compared to what it was loaded last time. 
        /// Note: the backend data source updates the changed <see cref="WebsiteUrl" /> only if this is set to true no matter what
        /// the actual value of <see cref="WebsiteUrl" /> is.
        /// </summary>
        [DataMember]
        public bool IsWebsiteUrlModified
        { 
            get
            {
                return _isWebsiteUrlModified;
            }
            set
            {
                _isWebsiteUrlModified = value;
            }
        }
        private bool _isWebsiteUrlModified = false;

        /// <summary>
        /// Meta-info: intrinsic id; fixed; not null; foreign key.
        /// </summary>
        [Key]
        [Required]
        [Editable(false)]
        [DataMember(IsRequired = true)]
        public string ApplicationID
        { 
            get
            {
                return _ApplicationID;
            }
            set
            {
                if (_ApplicationID != value)
                {
                    _ApplicationID = value;
                }
            }
        }
        private string _ApplicationID = default(string);

        /// <summary>
        /// Meta-info: intrinsic id; fixed; not null; foreign key.
        /// </summary>
        [Key]
        [Required]
        [Editable(false)]
        [DataMember(IsRequired = true)]
        public string UserID
        { 
            get
            {
                return _UserID;
            }
            set
            {
                if (_UserID != value)
                {
                    _UserID = value;
                }
            }
        }
        private string _UserID = default(string);

#endregion

#region Entities that the current one depends upon.

        /// <summary>
        /// Entity in data set "Applications" for <see cref="Application_" /> that this entity depend upon through .
        /// The corresponding foreign key set is { <see cref="UserDetail.ApplicationID" /> }.
        /// </summary>
        [DataMember]
        public Application_ Application_Ref
        {
            get 
            {
                if (_Application_Ref == null && AutoLoadApplication_Ref != null)
                    _Application_Ref = AutoLoadApplication_Ref();
                return _Application_Ref; 
            }
            set 
            { 
                _Application_Ref = value; 
            }
        }
        private Application_ _Application_Ref = null;

        /// <summary>
        /// <see cref="UserDetail.Application_Ref" /> is not initialized when the entity is created. Clients could call this method to load it provided a proper delegate <see cref="UserDetail.DelLoadApplication_Ref" /> was setup
        /// before calling it.
        /// </summary>
        public void LoadApplication_Ref()
        {
            if (_Application_Ref != null)
                return;
            if (DelLoadApplication_Ref != null)
                _Application_Ref = DelLoadApplication_Ref();
        }

        /// <summary>
        /// A delegate to load <see cref="UserDetail.Application_Ref" />.
        /// </summary>
        public Func<Application_> DelLoadApplication_Ref = null;

        /// <summary>
        /// A delegate to load <see cref="UserDetail.Application_Ref" /> automatically when it is referred to at the first time.
        /// </summary>
        public Func<Application_> AutoLoadApplication_Ref = null;

        /// <summary>
        /// Entity in data set "Users" for <see cref="User" /> that this entity depend upon through .
        /// The corresponding foreign key set is { <see cref="UserDetail.UserID" /> }.
        /// </summary>
        [DataMember]
        public User UserRef
        {
            get 
            {
                if (_UserRef == null && AutoLoadUserRef != null)
                    _UserRef = AutoLoadUserRef();
                return _UserRef; 
            }
            set 
            { 
                _UserRef = value; 
            }
        }
        private User _UserRef = null;

        /// <summary>
        /// <see cref="UserDetail.UserRef" /> is not initialized when the entity is created. Clients could call this method to load it provided a proper delegate <see cref="UserDetail.DelLoadUserRef" /> was setup
        /// before calling it.
        /// </summary>
        public void LoadUserRef()
        {
            if (_UserRef != null)
                return;
            if (DelLoadUserRef != null)
                _UserRef = DelLoadUserRef();
        }

        /// <summary>
        /// A delegate to load <see cref="UserDetail.UserRef" />.
        /// </summary>
        public Func<User> DelLoadUserRef = null;

        /// <summary>
        /// A delegate to load <see cref="UserDetail.UserRef" /> automatically when it is referred to at the first time.
        /// </summary>
        public Func<User> AutoLoadUserRef = null;

#endregion

#region Entities that depend on the current one.

#endregion

        /// <summary>
        /// Whether or not the present entity is identitical to <paramref name="other" />, in the sense that they have the same (set of) primary key(s).
        /// </summary>
        /// <param name="other">The entity to be compared to.</param>
        /// <returns>
        ///   The result of comparison.
        /// </returns>
        public bool IsEntityIdentical(UserDetail other)
        {
            if (other == null)
                return false;
            if (ID != other.ID)
                return false;
            return true;
        }              

        /// <summary>
        /// Whether or not the present entity is identitical to <paramref name="other" />, in the sense that they have the same (set of) intrinsic identifiers.
        /// </summary>
        /// <param name="other">The entity to be compared to.</param>
        /// <returns>
        ///   The result of comparison.
        /// </returns>
        public bool IsEntityTheSame(UserDetail other)
        {
            if (other == null)
                return false;
            else
                return ApplicationID == other.ApplicationID &&  UserID == other.UserID;
        }              

        /// <summary>
        /// Merge changes inside entity <paramref name="from" /> to the entity <paramref name="to" />. Any changes in <paramref name="from" /> that is not changed in <paramref name="to" /> is updated inside <paramref name="to" />.
        /// </summary>
        /// <param name="from">The "old" entity acting as merging source.</param>
        /// <param name="to">The "new" entity which inherits changes made in <paramref name="from" />.</param>
        /// <returns>
        /// </returns>
        public static void MergeChanges(UserDetail from, UserDetail to)
        {
            if (to.IsPersisted)
            {
                if (from.IsBirthDateModified && !to.IsBirthDateModified)
                {
                    to.BirthDate = from.BirthDate;
                    to.IsBirthDateModified = true;
                }
                if (from.IsDescriptionModified && !to.IsDescriptionModified)
                {
                    to.Description = from.Description;
                    to.IsDescriptionModified = true;
                }
                if (from.IsGenderModified && !to.IsGenderModified)
                {
                    to.Gender = from.Gender;
                    to.IsGenderModified = true;
                }
                if (from.IsLastModifiedModified && !to.IsLastModifiedModified)
                {
                    to.LastModified = from.LastModified;
                    to.IsLastModifiedModified = true;
                }
                if (from.IsPhotoModified && !to.IsPhotoModified)
                {
                    to.Photo = from.Photo;
                    to.IsPhotoModified = true;
                }
                if (from.IsPhotoLastModifiedModified && !to.IsPhotoLastModifiedModified)
                {
                    to.PhotoLastModified = from.PhotoLastModified;
                    to.IsPhotoLastModifiedModified = true;
                }
                if (from.IsPhotoMimeModified && !to.IsPhotoMimeModified)
                {
                    to.PhotoMime = from.PhotoMime;
                    to.IsPhotoMimeModified = true;
                }
                if (from.IsWebsiteUrlModified && !to.IsWebsiteUrlModified)
                {
                    to.WebsiteUrl = from.WebsiteUrl;
                    to.IsWebsiteUrlModified = true;
                }
            }
            else
            {
                to.IsPersisted = from.IsPersisted;
                to.ID = from.ID;
                to.CreateDate = from.CreateDate;
                to.BirthDate = from.BirthDate;
                to.IsBirthDateModified = from.IsBirthDateModified;
                to.Description = from.Description;
                to.IsDescriptionModified = from.IsDescriptionModified;
                to.Gender = from.Gender;
                to.IsGenderModified = from.IsGenderModified;
                to.LastModified = from.LastModified;
                to.IsLastModifiedModified = from.IsLastModifiedModified;
                to.Photo = from.Photo;
                to.IsPhotoModified = from.IsPhotoModified;
                to.PhotoLastModified = from.PhotoLastModified;
                to.IsPhotoLastModifiedModified = from.IsPhotoLastModifiedModified;
                to.PhotoMime = from.PhotoMime;
                to.IsPhotoMimeModified = from.IsPhotoMimeModified;
                to.WebsiteUrl = from.WebsiteUrl;
                to.IsWebsiteUrlModified = from.IsWebsiteUrlModified;
                to.ApplicationID = from.ApplicationID;
                to.UserID = from.UserID;
            }
        }

        /// <summary>
        /// Update changes to the current entity compared to an input <paramref name="newdata" /> and set the entity to a proper state for updating.
        /// </summary>
        /// <param name="newdata">The "new" entity acting as the source of the changes, if any.</param>
        /// <returns>
        /// </returns>
        public void UpdateChanges(UserDetail newdata)
        {
            int cnt = 0;
            if (BirthDate != newdata.BirthDate)
            {
                BirthDate = newdata.BirthDate;
                IsBirthDateModified = true;
                cnt++;
            }
            if (Description != newdata.Description)
            {
                Description = newdata.Description;
                IsDescriptionModified = true;
                cnt++;
            }
            if (Gender != newdata.Gender)
            {
                Gender = newdata.Gender;
                IsGenderModified = true;
                cnt++;
            }
            if (LastModified != newdata.LastModified)
            {
                LastModified = newdata.LastModified;
                IsLastModifiedModified = true;
                cnt++;
            }
            bool bPhoto = Photo == null && newdata.Photo != null ||
                                                         Photo != null && newdata.Photo == null ||
                                                         Photo != null && newdata.Photo != null && Photo.Length != newdata.Photo.Length;
            if (!bPhoto && Photo != null)
            {
                for (int i = 0; i < Photo.Length; i++)
                {
                    bPhoto = Photo[i] != newdata.Photo[i];
                    if (bPhoto)
                        break;
                }
            }
            if (bPhoto)
            {
                Photo = newdata.Photo;
                IsPhotoModified = true;
                cnt++;
            }
            if (PhotoLastModified != newdata.PhotoLastModified)
            {
                PhotoLastModified = newdata.PhotoLastModified;
                IsPhotoLastModifiedModified = true;
                cnt++;
            }
            if (PhotoMime != newdata.PhotoMime)
            {
                PhotoMime = newdata.PhotoMime;
                IsPhotoMimeModified = true;
                cnt++;
            }
            if (WebsiteUrl != newdata.WebsiteUrl)
            {
                WebsiteUrl = newdata.WebsiteUrl;
                IsWebsiteUrlModified = true;
                cnt++;
            }
            IsEntityChanged = cnt > 0;
        }

        /// <summary>
        /// Internal use
        /// </summary>
        public void NormalizeValues()
        {
            StartAutoUpdating = false;
            if (ApplicationID == null)
                ApplicationID = "";
            if (UserID == null)
                UserID = "";
            if (!IsEntityChanged)
                IsEntityChanged = IsBirthDateModified || IsDescriptionModified || IsGenderModified || IsLastModifiedModified || IsPhotoModified || IsPhotoLastModifiedModified || IsPhotoMimeModified || IsWebsiteUrlModified;
            if (IsDescriptionModified && !IsDescriptionLoaded)
                IsDescriptionLoaded = true;
            if (IsPhotoModified && !IsPhotoLoaded)
                IsPhotoLoaded = true;
            StartAutoUpdating = true;
        }

        /// <summary>
        /// Make a shallow copy of the entity.
        /// </summary>
        IDbEntity IDbEntity.ShallowCopy(bool preserveState)
        {
            return ShallowCopy(false, preserveState);
        }

        /// <summary>
        /// Internal use
        /// </summary>
        public UserDetail ShallowCopy(bool allData = false, bool preserveState = false)
        {
            UserDetail e = new UserDetail();
            e.StartAutoUpdating = false;
            e.ID = ID;
            e.CreateDate = CreateDate;
            e.BirthDate = BirthDate;
            if (preserveState)
                e.IsBirthDateModified = IsBirthDateModified;
            else
                e.IsBirthDateModified = false;
            e.Gender = Gender;
            if (preserveState)
                e.IsGenderModified = IsGenderModified;
            else
                e.IsGenderModified = false;
            e.LastModified = LastModified;
            if (preserveState)
                e.IsLastModifiedModified = IsLastModifiedModified;
            else
                e.IsLastModifiedModified = false;
            e.PhotoLastModified = PhotoLastModified;
            if (preserveState)
                e.IsPhotoLastModifiedModified = IsPhotoLastModifiedModified;
            else
                e.IsPhotoLastModifiedModified = false;
            e.PhotoMime = PhotoMime;
            if (preserveState)
                e.IsPhotoMimeModified = IsPhotoMimeModified;
            else
                e.IsPhotoMimeModified = false;
            e.WebsiteUrl = WebsiteUrl;
            if (preserveState)
                e.IsWebsiteUrlModified = IsWebsiteUrlModified;
            else
                e.IsWebsiteUrlModified = false;
            e.ApplicationID = ApplicationID;
            e.UserID = UserID;
            if (allData)
            {
                e.Description = Description;
                if (preserveState)
                    e.IsDescriptionModified = IsDescriptionModified;
                else
                    e.IsDescriptionModified = false;
                e.Photo = Photo;
                if (preserveState)
                    e.IsPhotoModified = IsPhotoModified;
                else
                    e.IsPhotoModified = false;
            }
            e.DistinctString = GetDistinctString(true);
            e.IsPersisted = IsPersisted;
            if (preserveState)
                e.IsEntityChanged = IsEntityChanged;
            else
                e.IsEntityChanged = false;
            e.StartAutoUpdating = true;
            return e;
        }

        /// <summary>
        /// A textual representation of the entity.
        /// </summary>
        public override string ToString()
        {
            System.Text.StringBuilder sb = new System.Text.StringBuilder();
            sb.Append(@"
----===== [[UserDetail]] =====----
  ID = '" + ID + @"'
  CreateDate = " + CreateDate + @"
  BirthDate = " + (BirthDate.HasValue ? BirthDate.Value.ToString() : "null") + @"");
            if (IsBirthDateModified)
                sb.Append(@" (modified)");
            else
                sb.Append(@" (unchanged)");
            sb.Append(@"
  Gender = '" + (Gender != null ? Gender : "null") + @"'");
            if (IsGenderModified)
                sb.Append(@" (modified)");
            else
                sb.Append(@" (unchanged)");
            sb.Append(@"
  LastModified = " + (LastModified.HasValue ? LastModified.Value.ToString() : "null") + @"");
            if (IsLastModifiedModified)
                sb.Append(@" (modified)");
            else
                sb.Append(@" (unchanged)");
            sb.Append(@"
  PhotoLastModified = " + (PhotoLastModified.HasValue ? PhotoLastModified.Value.ToString() : "null") + @"");
            if (IsPhotoLastModifiedModified)
                sb.Append(@" (modified)");
            else
                sb.Append(@" (unchanged)");
            sb.Append(@"
  PhotoMime = '" + (PhotoMime != null ? PhotoMime : "null") + @"'");
            if (IsPhotoMimeModified)
                sb.Append(@" (modified)");
            else
                sb.Append(@" (unchanged)");
            sb.Append(@"
  WebsiteUrl = '" + (WebsiteUrl != null ? WebsiteUrl : "null") + @"'");
            if (IsWebsiteUrlModified)
                sb.Append(@" (modified)");
            else
                sb.Append(@" (unchanged)");
            sb.Append(@"
  ApplicationID = '" + ApplicationID + @"'");
            sb.Append(@" (natural id)");
            sb.Append(@"
  UserID = '" + UserID + @"'");
            sb.Append(@" (natural id)");
            sb.Append(@"
");
            return sb.ToString();
        }

    }

    ///<summary>
    ///The result of an add or update of type <see cref="UserDetail" />.
    ///</summary>
    [DataContract]
    public class UserDetailUpdateResult : IUpdateResult
    {
        /// <summary>
        /// Status of add, update or delete operation
        /// </summary>
        [DataMember]
        public int OpStatus
        {
            get { return _opStatus; }
            set { _opStatus = value; }
        }
        private int _opStatus = (int)EntityOpStatus.Unknown;

        /// <summary>
        /// Parents or child operation status
        /// </summary>
        [DataMember]
        public int RelatedOpStatus
        {
            get { return _relatedOpStatus; }
            set { _relatedOpStatus = value; }
        }
        private int _relatedOpStatus = (int)EntityOpStatus.Unknown;

        /// <summary>
        /// The updated entity.
        /// </summary>
        [DataMember]
        public UserDetail UpdatedItem
        {
            get;
            set;
        }

        /// <summary>
        /// If the relational data source has a way of detecting concurrent update conflicts, this is the item inside the
        /// data source that had been updated by other agents in between the load and update time interval of the present
        /// agent. The client software should resolve the conflict.
        /// </summary>
        [DataMember]
        public UserDetail ConflictItem
        {
            get;
            set;
        }

        /// <summary>
        /// String representation of the entity.
        /// </summary>
        public string EntityInfo 
        { 
            get { return UpdatedItem == null ? "NULL" : UpdatedItem.ToString(); }
        }
    }

}
